Doom64EX
========

Doom64EX is a reverse-engineering project aimed to recreate Doom64 as close as possible with additional modding features.

**NOTE for Linux users:** As of Feb. 24, 2016, the save data is located in `$XDG_DATA_HOME/doom64ex` (typically `~/.local/share/doom64ex`) and not in `~/.doom64ex`. The files can be safely moved to their new home.

## Branches

* `release` - stable release, verified and tested on SteamOS / Debian Jessie.
* `master` - tracks the upstream master tree, and is not guarenteed to work / build.

## Dependencies

* SDL2
* SDL2_net
* zlib
* libpng
* FluidSynth
* gcc-5 or clang-3.6 (>=3.6.2) if building from the master tree

For Debian users:

```
sudo apt-get install cmake debhelper libsdl2-dev libsdl2-net-dev zlib1g-dev libpng12-dev libfluidsynth-dev
```

## Compiling

### Linux

Clone this repo

    $ git clone https://github.com/svkaiser/Doom64EX

Create a new directory inside the repo root where compilation will take place

    $ mkdir Doom64EX/temp
    $ cd Doom64EX/temp

Run cmake and make

    $ cmake .. && make
    
Install doom64ex

    # make install

## Usage

### Linux

Doom64EX needs the Doom 64 data to be present in any of the following directories:

* The directory in which `doom64ex` resides
* `$XDG_DATA_HOME/doom64ex` (eg. `~/.local/share/doom64ex`)
* `/usr/local/share/games/doom64ex`
* `/usr/local/share/doom64ex`
* `/usr/share/games/doom64ex`
* `/usr/share/doom64ex`

The data files are:

* `kex.wad` (Generated by cmake)
* `doom64.wad`
* `doomsnd.sf2`

To generate the two latter files, acquire a Doom64 ROM and run:

    $ doom64ex -wadgen PATH_TO_ROM

This will generate the required files and place them in `$XDG_DATA_DIR/doom64ex`. 

After this you can play.

    $ doom64ex

# Troubleshooting

## Generating the wad files

If you have trouble generating the wad file, try making a directory, and running wadgen in that directory. For some reason, the output tries to write to the current name of the rom.

```
mkdir wad_output && cd wad_output
doom64ex -wadgen ../doom64.z64
```

When you generate the doom files with the executable, check the permissions:

```
Sucessfully created /home/desktop/doom64.wad
Writing Soundfont File...

Sucessfully created /home/desktop/doomsnd.sf2
desktop@steamos:~$ ls -la /home/desktop/doom64.wad
-r-------- 1 desktop desktop 8641888 Jul 30 07:25 /home/desktop/doom64.wad

desktop@steamos:~$ ls -la /home/desktop/doomsnd.sf2
-r-------- 1 desktop desktop 5429302 Jul 30 07:25 /home/desktop/doomsnd.sf2
```

Try `chmod 755` on those files, and things may work fine.
